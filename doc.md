# ğŸ¦£ Mammoth CLI â„ï¸

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

Mammoth CLI æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å‰ç«¯é¡¹ç›®è„šæ‰‹æ¶å·¥å…·ï¼Œç”¨ Rust è¯­è¨€å¼€å‘ã€‚å®ƒå¸®åŠ©å¼€å‘è€…å¿«é€Ÿä»æ¨¡æ¿åˆ›å»ºæ–°çš„å‰ç«¯é¡¹ç›®ï¼Œæ”¯æŒå¤šç§æ¨¡æ¿ç®¡ç†å’Œè¿œç¨‹ä»“åº“é›†æˆã€‚

- ğŸš€ **é«˜æ€§èƒ½**: åŸºäº Rust å¼€å‘ï¼Œå¯åŠ¨é€Ÿåº¦å¿«ï¼Œå†…å­˜å ç”¨å°
- ğŸ“¦ **æ¨¡æ¿ç®¡ç†**: æ”¯æŒä» Git ä»“åº“æ·»åŠ ã€åˆ é™¤å’Œç®¡ç†æ¨¡æ¿
- ğŸ¨ **äº¤äº’å¼åˆ›å»º**: æä¾›å‹å¥½çš„äº¤äº’å¼é¡¹ç›®åˆ›å»ºå‘å¯¼
- ğŸ”§ **è‡ªåŠ¨é…ç½®**: è‡ªåŠ¨æ›´æ–° package.json å¹¶åˆå§‹åŒ– Git ä»“åº“
- ğŸ’¾ **æ™ºèƒ½ç¼“å­˜**: é«˜æ•ˆçš„æ¨¡æ¿ç¼“å­˜æœºåˆ¶ï¼Œé¿å…é‡å¤ä¸‹è½½
- ğŸ“¤ **é…ç½®ç®¡ç†**: æ”¯æŒé…ç½®çš„å¯¼å‡ºå’Œå¯¼å…¥
- ğŸ›¡ï¸ **è·¨å¹³å°**: æ”¯æŒ Windowsã€macOS å’Œ Linux

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| ç‰¹æ€§ | Mammoth CLI | å…¶ä»–è„šæ‰‹æ¶å·¥å…· |
|------|-------------|----------------|
| å¯åŠ¨æ—¶é—´ | å¿«é€Ÿå¯åŠ¨ï¼ˆRust åŸç”Ÿï¼‰ | ç›¸å¯¹è¾ƒæ…¢ï¼ˆéœ€è¦ Node.js è¿è¡Œæ—¶ï¼‰ |
| å†…å­˜å ç”¨ | ä½å†…å­˜å ç”¨ | è¾ƒé«˜å†…å­˜å ç”¨ï¼ˆNode.js è¿è¡Œæ—¶å¼€é”€ï¼‰ |
| æ¨¡æ¿ä¸‹è½½ | ç¨€ç–æ£€å‡ºï¼ˆåªä¸‹è½½éœ€è¦çš„æ–‡ä»¶ï¼‰ | å®Œæ•´å…‹éš†ï¼ˆä¸‹è½½æ•´ä¸ªä»“åº“ï¼‰ |
| è·¨å¹³å° | åŸç”Ÿæ”¯æŒï¼ˆå•ä¸€äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ | ä¾èµ– Node.js ç¯å¢ƒ |
| ä¾èµ–æ•°é‡ | 9ä¸ªæ ¸å¿ƒä¾èµ– | é€šå¸¸ 50+ ä¸ªä¾èµ– |
| äºŒè¿›åˆ¶å¤§å° | è¾ƒå°ï¼ˆRust ç¼–è¯‘ä¼˜åŒ–ï¼‰ | è¾ƒå¤§ï¼ˆåŒ…å« Node.js è¿è¡Œæ—¶ï¼‰ |
| å†·å¯åŠ¨ | æ— éœ€é¢„çƒ­ï¼Œå³æ—¶å¯ç”¨ | å¯èƒ½éœ€è¦é¢„çƒ­ Node.js è¿è¡Œæ—¶ |

> **æ³¨æ„**: ä»¥ä¸Šå¯¹æ¯”åŸºäº Rust å’Œ Node.js çš„æŠ€æœ¯ç‰¹æ€§ï¼Œå…·ä½“æ€§èƒ½æ•°æ®éœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­è¿›è¡ŒåŸºå‡†æµ‹è¯•éªŒè¯ã€‚

**æœ€æ–°åŸºå‡†æµ‹è¯•ç»“æœï¼ˆCriterion å®æµ‹ï¼‰**ï¼š

- å¯åŠ¨æ—¶é—´: â‰ˆ678ms
- é…ç½®è§£æ: â‰ˆ0.0033ms
- æ–‡ä»¶å¤åˆ¶: â‰ˆ41ms
- æ¨¡æ¿ä¸‹è½½ï¼ˆç¨€ç–æ£€å‡ºæ¨¡æ‹Ÿï¼‰: â‰ˆ4.4ms
- é›†æˆæµ‹è¯•ï¼ˆå®Œæ•´é¡¹ç›®åˆ›å»ºæµç¨‹ï¼‰: â‰ˆ7.9ms

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. å®‰è£…
cargo install mammoth-cli

# 2. æ·»åŠ æ¨¡æ¿ä»“åº“
mammoth-cli repo add aio-templates \
  --url https://github.com/Mulander-J/aio-templates \
  --branch main

# 3. æ·»åŠ ä¸€ä¸ªæ¨¡æ¿
mammoth-cli template add nuxt-shadcn \
  --name "Nuxt Shadcn Starter" \
  --repo aio-templates \
  --path "vue/nuxt-shadcn" \
  --description "Nuxt Shadcn with Tailwind" \
  --language vue \
  --tags "nuxt,shadcn,tailwind"

# 4. ä¸‹è½½æ¨¡æ¿
mammoth-cli template download nuxt-shadcn

# æˆ–è€…ç›´æ¥æŒ‡å®šæ¨¡æ¿åˆ›å»º
mammoth-cli new --template nuxt-shadcn --name my-project
```

> **æ³¨æ„**: å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹å’Œå‘½ä»¤è¯´æ˜è¯·å‚è€ƒ [README.md](./README.md)

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®

ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š

- **Rust**: æœ€æ–°ç¨³å®šç‰ˆæœ¬ (æ¨è 1.70+)
- **Git**: ç”¨äºç‰ˆæœ¬æ§åˆ¶å’Œæ¨¡æ¿ä¸‹è½½
- **Cargo**: Rust åŒ…ç®¡ç†å™¨ï¼ˆéš Rust å®‰è£…ï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé¡¹ç›®
cargo build

# è¿è¡Œå¼€å‘æ¨¡å¼
cargo run

# è¿è¡Œå¹¶æ˜¾ç¤ºè¯¦ç»†è¾“å‡º
cargo run -- --verbose

# æ£€æŸ¥ç¼–è¯‘é”™è¯¯
cargo check

# è¿è¡Œæµ‹è¯•
cargo test
```

### å¼€å‘å·¥ä½œæµ

1. **ä»£ç æ£€æŸ¥**: ä½¿ç”¨ `cargo check` æ£€æŸ¥è¯­æ³•é”™è¯¯
2. **æµ‹è¯•**: è¿è¡Œ `cargo test` ç¡®ä¿åŠŸèƒ½æ­£å¸¸
3. **æ„å»º**: ä½¿ç”¨ `cargo build` æ„å»ºé¡¹ç›®
4. **è¿è¡Œ**: ä½¿ç”¨ `cargo run` æµ‹è¯•åŠŸèƒ½

### è°ƒè¯•æŠ€å·§

- ä½¿ç”¨ `--verbose` å‚æ•°è·å–è¯¦ç»†è¾“å‡º
- åœ¨ä»£ç ä¸­æ·»åŠ  `println!` æˆ– `dbg!` è¿›è¡Œè°ƒè¯•
- ä½¿ç”¨ `cargo test -- --nocapture` æŸ¥çœ‹æµ‹è¯•è¾“å‡º

## ğŸ”¬ ç ”å‘è®¾è®¡

### ğŸ—ï¸ æ•´ä½“æ¶æ„å›¾

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLI Layer     â”‚    â”‚  Manager Layer  â”‚    â”‚  Config Layer   â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚  - cli.rs       â”‚â—„â”€â”€â–ºâ”‚  - manager.rs   â”‚â—„â”€â”€â–ºâ”‚  - config.rs    â”‚
â”‚  - main.rs      â”‚    â”‚  - project.rs   â”‚    â”‚  - utils.rs     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   External      â”‚    â”‚   File System   â”‚    â”‚   Git Repos     â”‚
â”‚   Dependencies  â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚                 â”‚    â”‚  - Templates    â”‚    â”‚  - Remote       â”‚
â”‚  - clap         â”‚    â”‚  - Cache        â”‚    â”‚  - Config       â”‚
â”‚  - tokio        â”‚    â”‚  - Config       â”‚    â”‚  - Checkout     â”‚
â”‚  - serde        â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ é¡¹ç›®ç»“æ„

```text
mammoth-cli/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs      # Entry, command dispatch
â”‚   â”œâ”€â”€ cli.rs       # CLI argument and subcommand definitions
â”‚   â”œâ”€â”€ config.rs    # Config structure and management
â”‚   â”œâ”€â”€ manager.rs   # Template & repository management core logic
â”‚   â”œâ”€â”€ project.rs   # Project creation and initialization
â”‚   â”œâ”€â”€ utils.rs     # Utility functions
â”‚   â””â”€â”€ lib.rs       # Common library (if any)
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ README.md
â”œâ”€â”€ doc.md
â”œâ”€â”€ example.config.json
â””â”€â”€ LICENSE
```

### ğŸ“¦ ä¾èµ–å…³ç³»

```toml
[dependencies]
# CLIå‚æ•°è§£æå’Œå‘½ä»¤è¡Œç•Œé¢æ¡†æ¶ï¼Œæ”¯æŒderiveå®
clap = { version = "4.0", features = ["derive", "std", "help"], default-features = false }
# é”™è¯¯å¤„ç†åº“ï¼Œæä¾›ç®€æ´çš„é”™è¯¯ç±»å‹å’Œä¼ æ’­
anyhow = "1.0" 
# åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ¡†æ¶ï¼Œæ”¯æŒderiveå®
serde = { version = "1.0", features = ["derive"], default-features = false }
# JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–å®ç°
serde_json = "1.0"
# å¼‚æ­¥è¿è¡Œæ—¶ï¼Œæä¾›å®Œæ•´çš„å¼‚æ­¥åŠŸèƒ½æ”¯æŒ
tokio = { version = "1.0", features = ["rt-multi-thread", "macros", "time", "process"] }
# ç»ˆç«¯æ–‡æœ¬é¢œè‰²å’Œæ ·å¼æ§åˆ¶
colored = "2.0"
# äº¤äº’å¼å‘½ä»¤è¡Œæç¤ºå’Œè¾“å…¥åº“
dialoguer = "0.11"
# è¿›åº¦æ¡å’ŒåŠ è½½åŠ¨ç”»æ˜¾ç¤º
indicatif = "0.17"
# è·¨å¹³å°ç³»ç»Ÿç›®å½•è·¯å¾„è·å–
dirs = "5.0" 
```

### âš¡ æ ¸å¿ƒåŠŸèƒ½

#### 1. æ¨¡æ¿ç®¡ç†

- **æ·»åŠ æ¨¡æ¿**: æ”¯æŒä»è¿œç¨‹ä»“åº“æ·»åŠ æ–°æ¨¡æ¿
- **åˆ é™¤æ¨¡æ¿**: ç§»é™¤ä¸éœ€è¦çš„æ¨¡æ¿
- **åˆ—è¡¨æ˜¾ç¤º**: æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æ¨¡æ¿
- **ä¸‹è½½æ›´æ–°**: æ”¯æŒå¼ºåˆ¶æ›´æ–°æ¨¡æ¿

```rust
// æ¨¡æ¿æ•°æ®ç»“æ„
#[derive(Debug, Serialize, Deserialize, Clone)]
pub struct Template {
    pub id: String,           // æ¨¡æ¿å”¯ä¸€æ ‡è¯†
    pub name: String,         // æ¨¡æ¿æ˜¾ç¤ºåç§°
    pub repo: String,         // æ‰€å±ä»“åº“
    pub path: String,         // ä»“åº“ä¸­çš„è·¯å¾„
    pub description: String,  // æ¨¡æ¿æè¿°
    pub language: String,     // ç¼–ç¨‹è¯­è¨€
    pub tags: Vec<String>,    // æ ‡ç­¾
}
```

#### 2. ä»“åº“ç®¡ç†

- **æ·»åŠ ä»“åº“**: æ”¯æŒæ·»åŠ å¤šä¸ªè¿œç¨‹æ¨¡æ¿ä»“åº“ï¼ˆåŒ…æ‹¬ç§æœ‰ä»“åº“ï¼‰
- **åˆ é™¤ä»“åº“**: ç§»é™¤ä¸éœ€è¦çš„ä»“åº“
- **ç¨€ç–æ£€å‡º**: ä½¿ç”¨ Git sparse-checkout åªä¸‹è½½éœ€è¦çš„æ¨¡æ¿æ–‡ä»¶
- **ç§æœ‰ä»“åº“æ”¯æŒ**: æ”¯æŒé€šè¿‡ç”¨æˆ·åå’Œè®¤è¯ä»¤ç‰Œè®¿é—®ç§æœ‰ä»“åº“

```rust
// ä»“åº“æ•°æ®ç»“æ„
#[derive(Debug, Serialize, Deserialize, Clone)]
pub struct Repo {
    pub name: String,         // ä»“åº“åç§°
    pub url: String,          // Git ä»“åº“ URL
    pub branch: String,       // åˆ†æ”¯åç§°
    pub auth_token: Option<String>,  // ç§æœ‰ä»“åº“è®¤è¯ä»¤ç‰Œ
    pub username: Option<String>,    // ç§æœ‰ä»“åº“ç”¨æˆ·å
}
```

**ç§æœ‰ä»“åº“é…ç½®ç¤ºä¾‹**:

```bash
# æ·»åŠ ç§æœ‰ä»“åº“
mammoth-cli repo add private-templates \
  --url https://github.com/your-org/private-templates \
  --branch main \
  --username your-username \
  --auth-token your-personal-access-token
```

**æ”¯æŒçš„è®¤è¯æ–¹å¼**:

- **HTTPS + ä¸ªäººè®¿é—®ä»¤ç‰Œ**: ç”¨äº GitHub/GitLab ç§æœ‰ä»“åº“
- **SSH å¯†é’¥**: è‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿé…ç½®çš„ SSH å¯†é’¥ ã€æ›´æ¨èğŸ”¥ã€‘
- **HTTP åŸºæœ¬è®¤è¯**: æ”¯æŒç”¨æˆ·å/å¯†ç ç»„åˆ

#### 3. é¡¹ç›®åˆ›å»º

- äº¤äº’å¼æµç¨‹
  1. **æ¨¡æ¿é€‰æ‹©**: ä»å¯ç”¨æ¨¡æ¿ä¸­é€‰æ‹©
  2. **é¡¹ç›®ä¿¡æ¯**: è¾“å…¥é¡¹ç›®åç§°ã€ä½œè€…ã€æè¿°ç­‰
  3. **é…ç½®ç¡®è®¤**: æ˜¾ç¤ºé¡¹ç›®æ‘˜è¦å¹¶ç¡®è®¤
  4. **é¡¹ç›®ç”Ÿæˆ**: å¤åˆ¶æ¨¡æ¿æ–‡ä»¶å¹¶é…ç½®é¡¹ç›®
- è‡ªåŠ¨é…ç½®
  1. æ›´æ–° `package.json` ä¸­çš„é¡¹ç›®ä¿¡æ¯
  2. åˆå§‹åŒ– Git ä»“åº“
  3. è®¾ç½®é¡¹ç›®ç›®å½•ç»“æ„

#### 4. é…ç½®ç®¡ç†

- **å¯¼å‡ºé…ç½®**: å°†å½“å‰é…ç½®ä¿å­˜åˆ°æ–‡ä»¶
- **å¯¼å…¥é…ç½®**: ä»æ–‡ä»¶æ¢å¤é…ç½®
- **é…ç½®éªŒè¯**: éªŒè¯é…ç½®æ–‡ä»¶çš„å®Œæ•´æ€§
- **åˆå¹¶æ¨¡å¼**: æ”¯æŒåˆå¹¶å’Œè¦†ç›–ä¸¤ç§å¯¼å…¥æ¨¡å¼

## ğŸ“š å‚è€ƒèµ„æ–™

- [Rust å®˜æ–¹æ–‡æ¡£](https://doc.rust-lang.org/)
- [Tokio å¼‚æ­¥è¿è¡Œæ—¶](https://tokio.rs/)
- [Clap CLI æ¡†æ¶](https://clap.rs/)
- [Git Sparse Checkout](https://git-scm.com/docs/git-sparse-checkout)
- [cargo-generate](https://github.com/cargo-generate/cargo-generate)
